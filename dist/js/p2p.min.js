"use strict";$(function(){$("#regForm").bootstrapValidator({message:"This value is not valid",excluded:":disabled",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名不能为空",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:12,message:"用户名长度不能小于6~12位"}}},password:{message:"密码不能为空",validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:12,message:"用户名长度不能小于6~12位"}}},confirmPass:{message:"密码不能为空",validators:{notEmpty:{message:"密码不能为空"},identical:{field:"password",message:"密码不一致"}}},phone:{message:"电话号码不能为空",validators:{notEmpty:{message:"电话号码不能为空"},regexp:{regexp:/^((1[358][0-9])|(14[57])|(17[0678])|(19[7]))\d{8}$/,message:"格式不正确。"}}},email:{message:"邮箱不能为空",validators:{notEmpty:{message:"邮箱不能为空"},emailAddress:{message:"邮箱格式不正确"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),a=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userAdd.php",a,function(e){e.isSuccess?(alert(e.msg),location.href="./login.php"):alert(e.msg)},"json")}),$("#loginForm").bootstrapValidator({message:"This value is not valid",excluded:":disabled",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名不能为空",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:12,message:"用户名长度不能小于6~12位"}}},password:{message:"密码不能为空",validators:{notEmpty:{message:"密码不能为空"},stringLength:{min:6,max:12,message:"密码长度不能小于6~12位"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),a=(s.data("bootstrapValidator"),s.serialize());$.post("./api/userLogin.php",a,function(e){if(e.isSuccess){var s=5;$("#myModalLabel").text("登录成功"),$("#loginContent").html("<span class='glyphicon glyphicon-ok'></span>"+e.msg+" <span id='num'>5</span>秒后跳转到个人中心"),$("#loginModal").modal("show");var a=setInterval(function(){s--,$("#num").text(s),0==s&&(clearInterval(a),location.href="./personal.php")},1e3)}else $("#myModalLabel").text("登录失败"),$("#loginContent").html("<span class='glyphicon glyphicon-remove'></span>"+e.msg+",请重新输入"),$("#loginModal").modal("show")},"json")})});